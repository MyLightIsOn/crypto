"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/common/http");
require("rxjs/add/operator/map");
require("rxjs/add/operator/share");
var CryptoService = /** @class */ (function () {
    function CryptoService(http) {
        this.http = http;
        this.coinArray = [];
        this.lookup = {};
        this.total = 0;
        this.cryptoList = [
            { symbol: 'TRX', amount: 4809.611 },
            { symbol: 'IOST', amount: 3626.37 },
            { symbol: 'XVG', amount: 2064.611 },
            { symbol: 'POE', amount: 1798.20 },
            { symbol: 'CND', amount: 999 },
            { symbol: 'TNB', amount: 999 },
            { symbol: 'ADA', amount: 299.7 },
            { symbol: 'XRP', amount: 161.838 },
            { symbol: 'IOTA', amount: 46.953 },
            { symbol: 'LTC', amount: 1.59840 },
            { symbol: 'BCX', amount: 999 },
            { symbol: 'BTC', amount: 0.00017156 }
        ];
    }
    CryptoService.prototype.getCrypto = function () {
        return this.http.get('https://api.binance.com/api/v3/ticker/price');
    };
    CryptoService.prototype.matchCoins = function (crypto) {
        for (var coin in this.cryptoList) {
            if (this.cryptoList[coin]['symbol'].slice(0, 3) === 'BTC') {
                this.lookup[this.cryptoList[coin]['symbol'] + 'USDT'] = this.cryptoList[coin]['symbol'];
            }
            else {
                this.lookup[this.cryptoList[coin]['symbol'] + 'BTC'] = this.cryptoList[coin]['symbol'];
            }
        }
        for (var i in crypto) {
            if (typeof this.lookup[crypto[i]['symbol']] !== 'undefined') {
                this.coinArray.push(crypto[i]);
            }
        }
        this.caclulateValue();
        return this.coinArray;
    };
    CryptoService.prototype.caclulateValue = function () {
        for (var i in this.coinArray) {
            for (var coin in this.cryptoList) {
                if (this.coinArray[i]['symbol'] === this.cryptoList[coin]['symbol'] + 'BTC') {
                    this.coinArray[i]['btc_value'] = this.coinArray[i]['price'] * this.cryptoList[coin]['amount'];
                    this.coinArray[i]['usd_value'] = (this.coinArray[i]['btc_value'] * this.bitcoin['price']).toFixed(2);
                }
                if (this.coinArray[i]['symbol'] === this.cryptoList[coin]['symbol'] + 'USDT') {
                    this.coinArray[i]['btc_value'] = this.cryptoList[coin]['amount'];
                    this.coinArray[i]['usd_value'] = (this.coinArray[i]['btc_value'] * this.bitcoin['price']).toFixed(2);
                }
            }
            this.total = this.total + parseFloat(this.coinArray[i]['usd_value']);
        }
        this.total = Math.round(this.total * 1e2) / 1e2;
        console.log('total: ' + this.total);
        console.log(this.coinArray);
    };
    CryptoService.prototype.getBTCValue = function (crypto) {
        for (var _i = 0, crypto_1 = crypto; _i < crypto_1.length; _i++) {
            var coin = crypto_1[_i];
            if (coin['symbol'] === 'BTCUSDT') {
                this.bitcoin = coin;
            }
        }
        return this.matchCoins(crypto);
    };
    CryptoService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], CryptoService);
    return CryptoService;
}());
exports.CryptoService = CryptoService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3J5cHRvLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjcnlwdG8uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUF5QztBQUN6Qyw2Q0FBa0Q7QUFFbEQsaUNBQStCO0FBQy9CLG1DQUFpQztBQUlqQztJQW9CSSx1QkFBb0IsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQWxCN0IsY0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNmLFdBQU0sR0FBRyxFQUFFLENBQUM7UUFDWixVQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsZUFBVSxHQUFHO1lBQ2pCLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFDO1lBQ2hDLEVBQUMsTUFBTSxFQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFDO1lBQ2hDLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFDO1lBQ2hDLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFDO1lBQy9CLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFDO1lBQzNCLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFDO1lBQzNCLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFDO1lBQzdCLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFDO1lBQy9CLEVBQUMsTUFBTSxFQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFDO1lBQy9CLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFDO1lBQy9CLEVBQUMsTUFBTSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFDO1lBQzNCLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxN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QTtJQUNsQyxDQUFDO0lBMUVPLGFBQWE7UUFEekIsaUJBQVUsRUFBRTt5Q0FxQmlCLGlCQUFVO09BcEIzQixhQUFhLENBMkV6QjtJQUFELG9CQUFDO0NBQUEsQUEzRUQsSUEyRUM7QUEzRVksc0NBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdGFibGV9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9tYXAnO1xuaW1wb3J0ICdyeGpzL2FkZC9vcGVyYXRvci9zaGFyZSc7XG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIENyeXB0b1NlcnZpY2Uge1xuICAgIHB1YmxpYyBiaXRjb2luO1xuICAgIHB1YmxpYyBjb2luQXJyYXkgPSBbXTtcbiAgICBwdWJsaWMgbG9va3VwID0ge307XG4gICAgcHVibGljIHRvdGFsID0gMDtcbiAgICBwcml2YXRlIGNyeXB0b0xpc3QgPSBbXG4gICAgICAgIHtzeW1ib2w6J1RSWCcsIGFtb3VudDogNDgwOS42MTF9LFxuICAgICAgICB7c3ltYm9sOidJT1NUJywgYW1vdW50OiAzNjI2LjM3fSxcbiAgICAgICAge3N5bWJvbDonWFZHJywgYW1vdW50OiAyMDY0LjYxMX0sXG4gICAgICAgIHtzeW1ib2w6J1BPRScsIGFtb3VudDogMTc5OC4yMH0sXG4gICAgICAgIHtzeW1ib2w6J0NORCcsIGFtb3VudDogOTk5fSxcbiAgICAgICAge3N5bWJvbDonVE5CJywgYW1vdW50OiA5OTl9LFxuICAgICAgICB7c3ltYm9sOidBREEnLCBhbW91bnQ6IDI5OS43fSxcbiAgICAgICAge3N5bWJvbDonWFJQJywgYW1vdW50OiAxNjEuODM4fSxcbiAgICAgICAge3N5bWJvbDonSU9UQScsIGFtb3VudDogNDYuOTUzfSxcbiAgICAgICAge3N5bWJvbDonTFRDJywgYW1vdW50OiAxLjU5ODQwfSxcbiAgICAgICAge3N5bWJvbDonQkNYJywgYW1vdW50OiA5OTl9LFxuICAgICAgICB7c3ltYm9sOiAnQlRDJywgYW1vdW50OiAwLjAwMDE3MTU2fVxuICAgIF07XG4gICAgXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KXt9XG5cbiAgICBnZXRDcnlwdG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KCdodHRwczovL2FwaS5iaW5hbmNlLmNvbS9hcGkvdjMvdGlja2VyL3ByaWNlJyk7XG4gICAgfVxuXG4gICAgbWF0Y2hDb2lucyhjcnlwdG8pe1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgY29pbiBpbiB0aGlzLmNyeXB0b0xpc3QpIHtcbiAgICAgICAgICAgIGlmKHRoaXMuY3J5cHRvTGlzdFtjb2luXVsnc3ltYm9sJ10uc2xpY2UoMCwgMykgPT09ICdCVEMnKXtcbiAgICAgICAgICAgICAgICB0aGlzLmxvb2t1cFt0aGlzLmNyeXB0b0xpc3RbY29pbl1bJ3N5bWJvbCddICsgJ1VTRFQnXSA9IHRoaXMuY3J5cHRvTGlzdFtjb2luXVsnc3ltYm9sJ107XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubG9va3VwW3RoaXMuY3J5cHRvTGlzdFtjb2luXVsnc3ltYm9sJ10gKyAnQlRDJ10gPSB0aGlzLmNyeXB0b0xpc3RbY29pbl1bJ3N5bWJvbCddO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSBpbiBjcnlwdG8pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5sb29rdXBbY3J5cHRvW2ldWydzeW1ib2wnXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2luQXJyYXkucHVzaChjcnlwdG9baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FjbHVsYXRlVmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29pbkFycmF5O1xuICAgIH1cbiAgICBcbiAgICBjYWNsdWxhdGVWYWx1ZSgpe1xuICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuY29pbkFycmF5KSB7XG4gICAgICAgICAgICBmb3IobGV0IGNvaW4gaW4gdGhpcy5jcnlwdG9MaXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29pbkFycmF5W2ldWydzeW1ib2wnXSA9PT0gdGhpcy5jcnlwdG9MaXN0W2NvaW5dWydzeW1ib2wnXSArICdCVEMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29pbkFycmF5W2ldWydidGNfdmFsdWUnXSA9IHRoaXMuY29pbkFycmF5W2ldWydwcmljZSddICogdGhpcy5jcnlwdG9MaXN0W2NvaW5dWydhbW91bnQnXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2luQXJyYXlbaV1bJ3VzZF92YWx1ZSddID0gKHRoaXMuY29pbkFycmF5W2ldWydidGNfdmFsdWUnXSAqIHRoaXMuYml0Y29pblsncHJpY2UnXSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb2luQXJyYXlbaV1bJ3N5bWJvbCddID09PSB0aGlzLmNyeXB0b0xpc3RbY29pbl1bJ3N5bWJvbCddICsgJ1VTRFQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29pbkFycmF5W2ldWydidGNfdmFsdWUnXSA9IHRoaXMuY3J5cHRvTGlzdFtjb2luXVsnYW1vdW50J107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29pbkFycmF5W2ldWyd1c2RfdmFsdWUnXSA9ICh0aGlzLmNvaW5BcnJheVtpXVsnYnRjX3ZhbHVlJ10gKiB0aGlzLmJpdGNvaW5bJ3ByaWNlJ10pLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMudG90YWwgKyBwYXJzZUZsb2F0KHRoaXMuY29pbkFycmF5W2ldWyd1c2RfdmFsdWUnXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3RhbCA9IE1hdGgucm91bmQoIHRoaXMudG90YWwgKiAxZTIgKSAvIDFlMjtcbiAgICAgICAgY29uc29sZS5sb2coJ3RvdGFsOiAnICsgdGhpcy50b3RhbCk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29pbkFycmF5KTtcbiAgICB9XG4gICAgXG5cbiAgICAgZ2V0QlRDVmFsdWUoY3J5cHRvKXtcbiAgICAgICAgIGZvciAobGV0IGNvaW4gb2YgY3J5cHRvKSB7XG4gICAgICAgICAgICAgaWYoY29pblsnc3ltYm9sJ10gPT09ICdCVENVU0RUJyl7XG4gICAgICAgICAgICAgICAgIHRoaXMuYml0Y29pbiA9IGNvaW47XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfVxuXG4gICAgICAgICByZXR1cm4gdGhpcy5tYXRjaENvaW5zKGNyeXB0bylcbiAgICAgfVxufVxuXG4iXX0=